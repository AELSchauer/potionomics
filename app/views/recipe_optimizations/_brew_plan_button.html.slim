- if @cupboard.brew_recipes.find_by(recipe_id: recipe_optimization.recipe_id)
  = button_to cupboard_brew_recipe_path(cupboard_id: @cupboard.id, id: recipe_optimization.recipe_id, tab: params[:tab], sort: params[:sort]), method: :delete, form_class: "h-5", class: "h-5" do
    span[class="popover inline-block" data-controller="popover" data-popover-translate-x="-30%" data-popover-translate-y="0%" data-action="mouseover->popover#mouseOver mouseout->popover#mouseOut"]
      <svg viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg" transform="rotate(0)" stroke="#15803d" class="w-6 h-5">
        <g id="SVGRepo_bgCarrier" stroke-width="0" transform="translate(0,0), scale(1)"><path transform="translate(-2.4, -2.4), scale(0.8999999999999999)" d="M16,28.429272206766264C19.73683767852302,28.480307697094947,23.87507589741189,29.15485006402261,26.63444693716631,26.63444693716631C29.45968400449147,24.053881933037548,29.5283043605879,19.825568096012493,29.607733384839126,16C29.689510763256326,12.061327294429677,30.03801153566726,7.522649406206161,27.085409235943658,4.914590764056346C24.19618337866176,2.362513070791611,19.854961151019463,3.9812372148305055,16,3.9801737410681586C12.143103714312145,3.9791097334573826,7.807421270322704,2.364509780805665,4.908472780210065,4.908472780210062C1.9409851886848108,7.512582049408769,2.166062576087297,12.05428879331498,2.3029229619673313,15.999999999999998C2.433572195093465,19.76664248004139,2.8610586890098055,23.8151654436466,5.652117152822573,26.347882847177424C8.360737090509827,28.80579225490787,12.342754345989679,28.37932373662596,16,28.429272206766264" fill="#dcfce7" strokewidth="0"></path></g><g id="SVGRepo_tracerCarrier" stroke-linecap="round" stroke-linejoin="round" stroke="#CCCCCC" stroke-width="0.24000000000000005"></g><g id="SVGRepo_iconCarrier"> <path d="M8 7.00003H4M8 12H4M8 17H4M12 3V21M9.2 21H16.8C17.9201 21 18.4802 21 18.908 20.782C19.2843 20.5903 19.5903 20.2843 19.782 19.908C20 19.4802 20 18.9201 20 17.8V6.20003C20 5.07993 20 4.51987 19.782 4.09205C19.5903 3.71573 19.2843 3.40977 18.908 3.21802C18.4802 3.00003 17.9201 3.00003 16.8 3.00003H9.2C8.07989 3.00003 7.51984 3.00003 7.09202 3.21802C6.71569 3.40977 6.40973 3.71573 6.21799 4.09205C6 4.51987 6 5.07993 6 6.20003V17.8C6 18.9201 6 19.4802 6.21799 19.908C6.40973 20.2843 6.71569 20.5903 7.09202 20.782C7.51984 21 8.07989 21 9.2 21Z" stroke="#15803d" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"></path> </g>
      </svg>
      div[class="content hidden absolute max-w-xs bg-gray-300 rounded p-2" data-popover-target="content"]
        | Remove from Brew Plan
- else
  = button_to cupboard_brew_recipes_path(cupboard_id: @cupboard.id, id: recipe_optimization.recipe_id, tab: params[:tab], sort: params[:sort]), method: :post, form_class: "h-5", class: "h-5" do
    span[class="popover inline-block" data-controller="popover" data-popover-translate-x="-30%" data-popover-translate-y="0%" data-action="mouseover->popover#mouseOver mouseout->popover#mouseOut"]
      <svg viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg" class="w-6 h-5">
        <g id="SVGRepo_bgCarrier" stroke-width="0"></g><g id="SVGRepo_tracerCarrier" stroke-linecap="round" stroke-linejoin="round"></g><g id="SVGRepo_iconCarrier"> <path d="M8 7.00003H4M8 12H4M8 17H4M12 3V21M9.2 21H16.8C17.9201 21 18.4802 21 18.908 20.782C19.2843 20.5903 19.5903 20.2843 19.782 19.908C20 19.4802 20 18.9201 20 17.8V6.20003C20 5.07993 20 4.51987 19.782 4.09205C19.5903 3.71573 19.2843 3.40977 18.908 3.21802C18.4802 3.00003 17.9201 3.00003 16.8 3.00003H9.2C8.07989 3.00003 7.51984 3.00003 7.09202 3.21802C6.71569 3.40977 6.40973 3.71573 6.21799 4.09205C6 4.51987 6 5.07993 6 6.20003V17.8C6 18.9201 6 19.4802 6.21799 19.908C6.40973 20.2843 6.71569 20.5903 7.09202 20.782C7.51984 21 8.07989 21 9.2 21Z" stroke="#000000" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"></path> </g>
      </svg>
      div[class="content hidden absolute max-w-xs bg-gray-300 rounded p-2" data-popover-target="content"]
        | Add to Brew Plan